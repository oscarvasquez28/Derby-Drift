<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <link rel="stylesheet" href="./world.css">
  <script src="/socket.io/socket.io.js"></script>
  <script type="importmap">
      {
        "imports": {
          "three": "https://cdn.jsdelivr.net/npm/three@0.150.1/build/three.module.js",
          "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.150.1/examples/jsm/"
        }
      }
    </script>
  <link rel="icon" href="\images\Miniature.png" type="image/png">
  <title>Derby Drift</title>
</head>

<body>
  <!-- Audio -->
  <audio id="myAudio2" loop>
    <source src="carro-loop.mp3" type="audio/mpeg">
    Tu navegador no soporta la reproducción de audio.
  </audio>
  <audio id="myAudio3">
    <source src="disparo.mp3" type="audio/mpeg">
    Tu navegador no soporta la reproducción de audio.
  </audio>
  <div id="world-menu">
    <div class="container-fluid world-menu-container">
      <div class="row world-menu-rows">
        <h1>Menú de Pausa</h1>
      </div>
      <div class="row world-menu-rows">
        <div class="col-xl-12">
          <button id="world-resume-button">Reanudar</button>
        </div>
      </div>
      <div class="row world-menu-rows">
        <div class="col-xl-12">
          <a href="./index.html"><button>Salir</button></a>
        </div>
      </div>
    </div>
  </div>
  <div class="lost-screen" id="lost-screen">
    <div>
      <p id="lost-screen-message">!Fuiste Destruido!</p>
      <p id="highscore" hidden>¡Nuevo récord!</p>
      <p>Puntuación: <span id="score"></span></p>
      <p id="cause"></p>
      <button id="restart-button">Volver a jugar</button>
      <button id="spectate-button">Espectar</button>
      <div>
        <button id="menu-button">Volver al menú principal</button>
      </div>
    </div>
  </div>
</body>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    if (localStorage.getItem('audioPlaying') === 'true') {
      var audio = document.getElementById('myAudio2');
      audio.play().catch(function (error) {
        console.log('Error al intentar reproducir el audio:', error);
      });
    }
    var audioAmbient = document.getElementById('myAudio2');
    if (localStorage.getItem('ambientVolume') !== null) {
      audioAmbient.volume = localStorage.getItem('ambientVolume') / 100;  // Establecer el volumen de audio 2
    } else {
      audioAmbient.volume = 0.5;  // Valor predeterminado si no hay volumen guardado
    }
  });
  document.addEventListener('keydown', function (event) {
    if (event.key === 'r' || event.key === 'R') {
      var audio = document.getElementById('myAudio3');
      audio.play().catch(function (error) {
        console.log('Error al intentar reproducir el audio:', error);
      });
    }
    var effectsVolume = document.getElementById('myAudio3');
    if (localStorage.getItem('effectsVolume') !== null) {
      effectsVolume.volume = localStorage.getItem('effectsVolume') / 100;  // Establecer el volumen de audio 3
    } else {
      effectsVolume.volume = 0.5;  // Valor predeterminado si no hay volumen guardado
    }
  });
</script>
<script type="module" src="./scripts/index.js"></script>

</html>